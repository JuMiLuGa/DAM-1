<!DOCTYPE HTML>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Práctica SI Verificar ISO Debian</title>
  <link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<body>
  <div id='autocentrado'>
    <h1 class='arriba'><a href='https://github.com/ricardofc/repoEDU-CCbySA/tree/main/SI/Criptografia' target='_blank'>Práctica Seguridade Informática<br /> Verificar ISO Debian</a></h1>
    <img class='cfigure mleft arriba' src="images/mouse-pointer-mini.png" />
    <div class='minindent'>&nbsp;</div>
    <figure class='cfigure'>
      <img class='contido bfigure pall' src="images/Escenario-SI-Allow-Boot-CD-USB-Windows-chntpw-anyone.png" />
    </figure>

    <div class='minindent'>&nbsp;</div>

    <div class='nota w80 fright'>
      <p class='justify pall'><b>LIMITACIÓN DE RESPONSABILIDADE</b> O autor do presente documento declina calquera responsabilidade asociada ao uso incorrecto e/ou malicioso que puidese realizarse coa información exposta no mesmo. Por tanto, non se fai responsable en ningún caso, nin pode ser considerado legalmente responsable en ningún caso, das consecuencias que poidan derivarse da información contida nel ou que esté enlazada dende ou hacia el, incluíndo os posibles erros e información incorrecta existentes, información difamatoria, así como das consecuencias que se poidan derivar sobre a súa aplicación en sistemas de información reais e/ou virtuais. Este documento foi xerado para uso didáctico e debe ser empregado en contornas privadas e virtuais controladas co permiso correspondente do administrador desas contornas.</p>

      <p class='pall arriba'><b>NOTAS</b>:
        <ul type='square'>
          <li class='colorblue'><span class='label'> md5sum, sha1sum, sha256sum, sha512sum</span>: Para sistemas GNU/Linux, como Debian, podedes empregar comandos como md5sum e sha256sum para verificar os "hash" dos arquivos.</li>
          <div class='minindent'>&nbsp;</div>
          <li class='colorblue'><span class='label'> certutil</span>: Para sistemas Microsoft Windows, coma Windows 10, podedes empregar o comando certutil para verificar os "hash" dos arquivos.</li>
          <div class='minindent'>&nbsp;</div>
          <li class='colorblue'><span class='label'> <a href='https://gnupg.org/' target='_blank'>gpg</a></span>
            <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
            <div class='minindent'>&nbsp;</div>
          </li>
          <li class='colorblue'><span class='label'> <a href='https://www.openpgp.org/' target='_blank'>OpenPGP</a></span>
            <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
            <div class='minindent'>&nbsp;</div>
          </li>
          <li class='colorblue'><span class='label'> <a href='https://philzimmermann.com/ES/background/index.html' target='_blank'>Philip Zimmermann</a></span>
            <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
            <div class='minindent'>&nbsp;</div>
          </li>
          <li class='colorblue'><span class='label'> <a href='https://www.debian.org/CD/verify.es.html' target='_blank'>Verificar la autenticidad de los CD de Debian</a></span>
            <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
            <div class='minindent'>&nbsp;</div>
          <li class='colorblue'><span class='label'> <a href='https://www.debian.org/events/keysigning.es.html' target='_blank'>Firmado de claves</a></span>
            <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
        </ul>
      </p>
    </div>

    <div class='pagebreak'>&nbsp;</div>

    <div class='contido'>
      <ol>
        <div><span class='label'>Práctica</span>
        <div class='minindent'>&nbsp;</div>
        <p class='mtop mleft mbottom label'>Descargar ISO Debian</p>
        <li class='mtop mleft mbottom'>Visitar <a href="https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/" target='_blank'>https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/</a>
        <img class='cfigure mleftsubs arribaplus' src="images/mouse-pointer-mini.png" />
        <li class='mtop mleft mbottom'>Descargar unha imaxe, por exemplo: debian-11.1.0-amd64-netinst.iso
          <div class='minindent'>&nbsp;</div>
          <ul class='dashed mleftsubs'>
            <li class='mtop mleft mbottom'>wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-11.1.0-amd64-netinst.iso <span class='explicacion'> #debian-11.1.0-amd64-netinst.iso <br />
          </ul>
        </li>

        <div class='minindent'>&nbsp;</div>

        <p class='mtop mleft mbottom label arriba'>Comparar "hash"</p>
        <li class='mtop mleft mbottom'>Comparar os "hash" da imaxe ISO anterior co que aparece dentro dos ficheiros SHA256SUMS e SHA512SUMS:
              <div class='explicacion2'>Non existe o ficheiro MD5SUMS. A que será debido?</div>
          <div class='minindent'>&nbsp;</div>
          <ul class='dashed mleftsubs'>
            <li class='mtop mleft mbottom'>wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA256SUMS<span class='explicacion'> #Descargar o ficheiro SHA256SUMS que contén os "hash" das ISO debian <br />
            <li class='mtop mleft mbottom'>sha256sum debian-11.1.0-amd64-netinst.iso | cut -d' ' -f1 > 1.sha256.txt <span class='explicacion'> #Gardar soamente o hash SHA256 no ficheiro 1.sha256.txt, é dicir, executar o comando sha256sum sobre a ISO de debian e desa saida quedarse soamente coa primeira columna (-f1), entendendo que as columnas son tidas en conta co caracter espazo (-d ' ') como separador <br />
            <li class='mtop mleft mbottom'>grep debian-11.1.0-amd64-netinst.iso SHA256SUMS | cut -d' ' -f1 > 2.sha256.txt<span class='explicacion'> #Gardar soamente o hash SHA256 no ficheiro 2.sha256.txt, é dicir, executar o comando grep sobre o ficheiro SHA256SUMS e desa saida quedarse soamente coa primeira columna (-f1), entendendo que as columnas son tidas en conta co caracter espazo (-d ' ') como separador <br />
            <li class='mtop mleft mbottom'>diff 1.sha256.txt 2.sha256.txt <span class='explicacion'> #Comparar os ficheiros 1.sha256.txt e 2.sha256.txt, é dicir, comparar o hash SHA256 do ficheiro descargado co gardado no ficheiro SHA256SUMS <br />

            <li class='mtop mleft mbottom'>wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA512SUMS<span class='explicacion'> #Descargar o ficheiro SHA512SUMS que contén os "hash" das ISO debian <br />
            <li class='mtop mleft mbottom'>sha512sum debian-11.1.0-amd64-netinst.iso | cut -d' ' -f1 > 1.sha512.txt <span class='explicacion'> #Gardar soamente o hash SHA512 no ficheiro 1.sha512.txt, é dicir, executar o comando sha512sum sobre a ISO de debian e desa saida quedarse soamente coa primeira columna (-f1), entendendo que as columnas son tidas en conta co caracter espazo (-d ' ') como separador <br />
            <li class='mtop mleft mbottom'>grep debian-11.1.0-amd64-netinst.iso SHA512SUMS | cut -d' ' -f1 > 2.sha512.txt<span class='explicacion'> #Gardar soamente o hash SHA512 no ficheiro 2.sha512.txt, é dicir, executar o comando grep sobre o ficheiro SHA512SUMS e desa saida quedarse soamente coa primeira columna (-f1), entendendo que as columnas son tidas en conta co caracter espazo (-d ' ') como separador <br />
            <li class='mtop mleft mbottom'>diff 1.sha512.txt 2.sha512.txt <span class='explicacion'> #Comparar os ficheiros 1.sha512.txt e 2.sha512.txt, é dicir, comparar o hash SHA512 do ficheiro descargado co gardado no ficheiro SHA512SUMS <br />
          </ul>
        <li class='mtop mleft mbottom'>Se os "hash" coinciden: a descarga foi corrupta? Por que?
        <li class='mtop mleft mbottom'>Teño que confiar nos ficheiros que conteñen os "hash" na páxina oficial de Debian (SHA256SUMS e SHA512SUMS)? Por que?

          
        <div class='indent pagebreak'>&nbsp;</div>
         <p class='mtop mleft mbottom label arriba'>Verificar sinaturas</p>
        <li class='mtop mleft mbottom'>Verificar as sinaturas dos ficheiros SHA256SUMS e SHA512SUMS:
          <div class='minindent'>&nbsp;</div>
          <ul class='dashed mleftsubs'>
            <li class='mtop mleft mbottom'>wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA256SUMS.sign<span class='explicacion'> #Descargar o ficheiro SHA256SUMS.sign, sinatura do ficheiro SHA256SUMS <br />
            <li class='mtop mleft mbottom'>gpg --verify SHA256SUMS.sign SHA256SUMS <span class='explicacion'> #Verificar a sinatura do ficheiro SHA256SUMS mediante o ficheiro asinado SHA256SUMS.sign </span>
<pre>
gpg: Signature made Sat 09 Oct 2021 04:53:47 PM EDT
gpg:                using RSA key DF9B9C49EAA9298432589D76DA87E80D6294BE9B
gpg: Can't check signature: No public key
</pre> 

            <li class='mtop mleft mbottom'>wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA512SUMS.sign<span class='explicacion'> #Descargar o ficheiro SHA512SUMS.sign, sinatura do ficheiro SHA512SUMS <br />
            <li class='mtop mleft mbottom'>gpg --verify SHA512SUMS.sign SHA512SUMS <span class='explicacion'> #Verificar a sinatura do ficheiro SHA512SUMS mediante o ficheiro asinado SHA512SUMS.sign </span><br />
<pre>
gpg: Signature made Sat 09 Oct 2021 04:53:48 PM EDT
gpg:                using RSA key DF9B9C49EAA9298432589D76DA87E80D6294BE9B
gpg: Can't check signature: No public key
</pre>
              <div class='explicacion2'>As sinaturas non se poden verificar. Debemos importar a clave pública de Debian para poder verificalas. Fixarse na saída dos comandos anteriores para recoller o fingerprint. Así:
<pre>
SHA256SUMS &#10141; DF9B9C49EAA9298432589D76DA87E80D6294BE9B
SHA512SUMS &#10141; DF9B9C49EAA9298432589D76DA87E80D6294BE9B
</pre>
Co cal o fingerprint é:
<pre>
DF9B9C49EAA9298432589D76DA87E80D6294BE9B
</pre>

              <p><span class='label'> <a href='https://www.debian.org/events/keysigning.es.html' target='_blank'>Firmado de claves</a></span>
                <img class='cfigure mleftsubs pall' src="images/mouse-pointer-mini-rotate-180.png" /></p>
              </div>
          </ul>
 
       
        <div class='indent'>&nbsp;</div>
        <p class='mtop mleft mbottom label arriba'>Importar clave pública de Debian</p>
        <li class='mtop mleft mbottom'>Importar ao noso anel de claves a clave pública de Debian para logo poder verificar os ficheiros asinados coa clave privada de Debian (SHA256SUMS.sign e SHA512SUMS.sign):
          <div class='minindent'>&nbsp;</div>
          <ul class='dashed mleftsubs'>
            <li class='mtop mleft mbottom'>gpg --keyserver keyring.debian.org --recv-keys 0xDF9B9C49EA<span class='explicacion'> #Importar ao noso anel a chave pública de Debian que se atopa no servidor keyring.debian.org Non é necesario escribir o todo o fingerprint, soamente o número de caracteres hexadecimal co que sexa identificativo e unívoco.</span>
<pre>
gpg: key DA87E80D6294BE9B: public key "Debian CD signing key <debian-cd@lists.debian.org>" imported
gpg: Total number processed: 1
gpg:               imported: 1
</pre>
            </li>
          </ul>

        <div class='indent'>&nbsp;</div>

        <p class='mtop mleft mbottom label arriba'>Verificar de novo as sinaturas</p>
        <li class='mtop mleft mbottom'>Verificar de novo as sinaturas dos ficheiros SHA256SUMS e SHA512SUMS:
          <div class='minindent'>&nbsp;</div>
          <ul class='dashed mleftsubs'>
            <li class='mtop mleft mbottom'>gpg --verify SHA256SUMS.sign SHA256SUMS <span class='explicacion'> #Verificar a sinatura do ficheiro SHA256SUMS mediante o ficheiro asinado SHA256SUMS.sign </span>
<pre>
gpg: Signature made Sat 09 Oct 2021 04:53:47 PM EDT
gpg:                using RSA key DF9B9C49EAA9298432589D76DA87E80D6294BE9B
gpg: Good signature from "Debian CD signing key <debian-cd@lists.debian.org>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: DF9B 9C49 EAA9 2984 3258  9D76 DA87 E80D 6294 BE9B
</pre>

            <li class='mtop mleft mbottom'>gpg --verify SHA512SUMS.sign SHA512SUMS <span class='explicacion'> #Verificar a sinatura do ficheiro SHA512SUMS mediante o ficheiro asinado SHA512SUMS.sign </span>
<pre>
gpg: Signature made Sat 09 Oct 2021 04:53:48 PM EDT
gpg:                using RSA key DF9B9C49EAA9298432589D76DA87E80D6294BE9B
gpg: Good signature from "Debian CD signing key <debian-cd@lists.debian.org>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: DF9B 9C49 EAA9 2984 3258  9D76 DA87 E80D 6294 BE9B
</pre>
          </ul>

        <div class='minindent'>&nbsp;</div>

        <li class='mtop mleft mbottom'>Se as sinaturas verificadas son auténticas <b><i>(Good Signature)</i></b> pódese deducir que os ficheiros SHA256SUMS e SHA512SUMS son pertencentes a Debian? Por que?
        <li class='mtop mleft mbottom'>Teño que confiar nos ficheiros que conteñen as sinaturas na páxina oficial de Debian (SHA256SUMS.sign e SHA512SUMS.sign)? Por que? Ten algo que ver o servidor keyring.debian.org
       </ul>
 
      </ol>
    </div>
  </div>
  <hr />
  <div id="footer">
    <div class="nome">Ricardo Feijoo Costa</div>
    <div class='.imgccbysa arriba'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="images/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
    </div>
  </div>
</body>
</html>
